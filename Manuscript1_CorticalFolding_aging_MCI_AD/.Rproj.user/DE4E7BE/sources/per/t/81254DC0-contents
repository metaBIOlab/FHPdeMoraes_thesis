# ORGANIZING ALL DATA AND INCLUDING VARIABLES ####

data <- full_join(data_h, LobesExtract_ALL_results)
data <- mutate(data, Amostra = "IDOR")

# passa as informacoes de area dos hemisferios para a coluna de area corrigida ----

data$TotalArea_corrected[data$ROI == "hemisphere"] <- data$TotalArea[data$ROI == "hemisphere"]
data$ExposedArea_corrected[data$ROI == "hemisphere"] <- data$ExposedArea[data$ROI == "hemisphere"]
data$logkteorico_corrected[data$ROI == "hemisphere"] <- data$logkteorico[data$ROI == "hemisphere"]
data$localGI_corrected[data$ROI == "hemisphere"] <- data$localGI[data$ROI == "hemisphere"]
data$logTotalArea_corrected[data$ROI == "hemisphere"] <- data$logTotalArea[data$ROI == "hemisphere"]
data$logExposedArea_corrected[data$ROI == "hemisphere"] <- data$logExposedArea[data$ROI == "hemisphere"]

# combina as tabelas geradas (Surfarea + Thickness + Volume + lGI = data) através do sujeito
dados <- inner_join(tabela_sujeitos, data, by = c("SUBJ", "Visit"))
colnames(dados)[which(names(dados) == "SUBJ_antigo.x")] <-
  "SUBJ_antigo"
dados <- dplyr::select(dados, -c(SUBJ_antigo.y))

#dados_neuroquant <- inner_join(tabela_sujeitos, FreeSurfer_as_NQ)

#dados_full <- full_join(tabela_sujeitos, data_h)
#
#verificar <- anti_join(dados_full, dados)
#
# write.csv(verificar, "data/verificar.csv")
# write.csv(dados, "data/dados.csv")

# bota visita como fator (mais fácil para fazer alguns gráficos)
dados$Visit <- as.factor(dados$Visit)

# limpeza dos dados
# retirar suejitos que nao foram processados no Freesurfer ou que nao tem resultados
#dados <- filter(dados, hemi != 0)

# cria tabela para verificar sujeitos com lGI igual a zero
#verificar_lGI_zero <- filter(dados, localGI == 0)
#write.csv(verificar_lGI_zero, "verificar_lGI_zero.csv")

# retirar valores infinitos e zeros
#dados <- filter(dados, localGI != 0)
#dados <- filter(dados, TotalArea != 0)
#dados <- filter(dados, AvgThickness != 0)
#dados <- filter(dados, is.na(Diagnostic))
